<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        html,body{
            padding:0;
            margin:0;
            background: #e4e4e4;
            position: relative;
            height: 100%;
        }
    </style>
    <script>
        !function(e,i){var t=e.documentElement,n=navigator.userAgent.match(/iphone|ipod|ipad/gi),a=n?Math.min(i.devicePixelRatio,3):1,m="orientationchange"in window?"orientationchange":"resize";t.dataset.dpr=a;for(var d,l,c=!1,o=e.getElementsByTagName("meta"),r=0;r<o.length;r++)l=o[r],"viewport"==l.name&&(c=!0,d=l);if(c)d.content="width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0,user-scalable=no";else{var o=e.createElement("meta");o.name="viewport",o.content="width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0,user-scalable=no",t.firstElementChild.appendChild(o)}var s=function(){var e=t.clientWidth;e/a>640&&(e=640*a),window.remScale=e/640,t.style.fontSize=100*(e/750)+"px";window.FootfontSize=100*(e/750);};s(),e.addEventListener&&i.addEventListener(m,s,!1)}(document,window);
    </script>
</head>
<body>
<div class="test"></div>
<button style="font-size: 30px;" id = 'shoeProp'>弹窗</button>
<script>
    (function (win) {
        win.middle = function (options) {
            var baseUrl = '//static.adbaitai.com/game/Theme/outLayer/Pre/indexpre',
                    finallUlr = '';
            finallUlr = baseUrl + '_' + options.id + '.js';
            var scriptObj = document.createElement('script');
            scriptObj.src = finallUlr;
            document.getElementsByTagName("body")[0].appendChild(scriptObj);
            scriptObj.onload = function () {
                var prop = new Baitai.Popup({
                    body: ".test",
                    closeCallback: function (type) {
                        options.closeCallback && options.closeCallback(type);
                    }
                });
                options.ready && options.ready(prop);
            };

        };
    })(window);
</script>
<script>
    window.middle({
        id: '02',
        closeCallback: function(type) {

        },
        ready: function(prop) {
            document.body.querySelector('#shoeProp').addEventListener('click',function(){
                prop.sendMessage({
                    "success": true,
                    "data": {
                        "score": 0,
                        "lgUrl": "http://wxpre.adbaitai.com/lg/index.html?appkey=zdnz&ADTAG=mw.clock&appId=wxfa8b4275880355a7",
                        "lottery": {
                            "lotteryId": 58,
                            "lotteryRewardId": 376,
                            "lotteryRewardBizType": 3,
                            "winBizId": 68,
                            "buttonText": "马上使用",
                            "skipUrl": "http://www.easyicon.net",
                            "rewardPicUrl": "//static.adbaitai.com/cow/2017/06/15/640w_300h_192851497523984_origin.png",
                            "rewardPicDescription": "信贷家10元红包",
                            "rewardDescription": "真实优质客户，实时订单推送，精细匹配客户"
                        },
                        "remainCount": 1
                    }
                });
                prop.toggleState('show');
            })
        }
    });


</script>
</body>
</html>